<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/communication/p2p-communication" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">P2P Communication | Quilibrium Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://quilibrium.com/img/favicon.png"><meta data-rh="true" name="twitter:image" content="https://quilibrium.com/img/favicon.png"><meta data-rh="true" property="og:url" content="https://quilibrium.com/docs/learn/communication/p2p-communication"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="P2P Communication | Quilibrium Documentation"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://quilibrium.com/docs/learn/communication/p2p-communication"><link data-rh="true" rel="alternate" href="https://quilibrium.com/docs/learn/communication/p2p-communication" hreflang="en"><link data-rh="true" rel="alternate" href="https://quilibrium.com/docs/learn/communication/p2p-communication" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8c4f23f7.css">
<script src="/assets/js/runtime~main.462f9b1c.js" defer="defer"></script>
<script src="/assets/js/main.61035e89.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/qlogopink.png" alt="Quilibrium Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/qlogo.png" alt="Quilibrium Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Quilibrium Docs</b></a><a class="navbar__item navbar__link" href="/docs/build/running-applications">Build</a><a class="navbar__item navbar__link" href="/docs/run-node/quick-start">Run</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/learn/communication/">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://quilibrium.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Quilibrium Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/QuilibriumNetwork" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/learn/communication/">Communication</a><button aria-label="Collapse sidebar category &#x27;Communication&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/communication/addressing">Addressing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/communication/e2ee">E2EE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/communication/mixnet-routing">Mixnet Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/learn/communication/p2p-communication">P2P Communication</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/learn/block-storage/">Block Storage</a><button aria-label="Expand sidebar category &#x27;Block Storage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/learn/oblivious-hypergraph/">Oblivious Hypergraph</a><button aria-label="Expand sidebar category &#x27;Oblivious Hypergraph&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/learn/operating-system/">Operating System</a><button aria-label="Expand sidebar category &#x27;Operating System&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/learn/communication/"><span itemprop="name">Communication</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">P2P Communication</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>P2P Communication</h1></header>
<div class="learn-page text-left flex md:flex-row flex-col text-slate"><div class="flex-1"><p class="pb-4 text-justify">Amending the <a href="https://arxiv.org/abs/2007.02754">GossipSub</a> protocol, we replace the topic subscription/broadcast process to not be an exact matching basis, but rather a counting bloom filter based approach, hence the name Blossom, a portmanteau of Bloom-Sum. The scoring system is also amended to take advantage of the message reconstruction protocol ensuring node mesh behaviors are correct, connectivity between nodes is altered to incorporate a circuit construction, and finally time/rate related metrics are instead replaced by generic consumption of unforgeable proofs of valid behavior. These alterations drastically improve privacy (IP collection is useless), remove cheap Sybil attack potential (by virtue of making it very expensive to overwhelm the network), and no longer require message inspection/processing at multiple points, reducing redundant compute costs.</p><h2 class="text-xl pt-10 pb-4 font-medium">Peer Discovery</h2><p class="pb-4 text-justify">Peer discovery is achieved through an open peer exchange, where nodes will offer a score-indexed list of peers in terms of ip address and public route keys, or graph address and capabilities.</p><div class="p-6 my-6 block rounded-xl dark:bg-white/10 bg-pink-50 drop-shadow-xl justify-center flex flex-col"><img class="pt-10" src="/img/docs/learn/communication/BlossomSub.png" alt="A diagram depicting the high level network structure"><div class="text-sm text-center">A depiction of a SLRP cluster under BlossomSub – each black circle corresponds to a node, a box with arrows indicates a participant, and 3, 2, and 1 nested circles indicate remaining envelope depth</div></div><p class="pb-4 text-justify">Node operation capabilities are typically self-adjusting, but in the event a node operator explicitly configures their node to enable/disable certain capabilities (at the impact of their score), only the capabilities the node broadcasts support for will be given.</p><h2 class="text-xl pt-10 pb-4 font-medium">Peer Connections</h2><p class="pb-4 text-justify">Peer connections are established using the same terminology as <a href="https://arxiv.org/abs/2007.02754">GossipSub</a>, with the topics switched with a bitmask:</p><div class="p-6 my-6 block rounded-xl dark:bg-white/10 bg-pink-50 drop-shadow-xl font-[&#x27;ui-serif&#x27;]"><div>Gossip Channel Join/Graft:</div><ol class="list-decimal pl-6"><li>A node scans the list for nodes with <code>ROUTE</code> capability.</li><li>At random, six nodes are picked, and an enveloped 3-depth gossip channel with each is created.</li><li>The node gossips a bandwidth-adjusted <code>JOIN[bitmask]</code> message (bitmasks are calculated relative to bandwidth, this adjusts periodically) with a fresh random join public key.</li><li>Nodes processing within that bitmask will gossip a <code>GRAFT[bitmask]</code> message with a fresh random graft public key, exchanged with the gossiped <code>JOIN</code> key. This <code>GRAFT</code> should only occur on one of the gossip channels.</li><li>Nodes accepting the <code>GRAFT</code> initiate an ad-hoc join of Triple-Ratchet for the cluster, and begin participation in SLRP.</li></ol></div><p class="pb-4 text-justify">For routing functionality, we can adopt the basic GossipSub scoring mechanism:</p><p class="text-center flex flex-row justify-center text-xl pb-4"></p><div class="flex flex-col justify-center">Score(peer) = TC(</div><div class="inline-block"><div class="flex flex-col"><div class="text-sm">4</div><div class="text-4xl">Σ</div><div class="text-sm">n=1</div></div></div><div class="flex flex-col justify-center pl-2"><div>w<sub>n,t</sub>P<sub>n,t</sub>) + w<sub>5</sub>P<sub>5</sub> + w<sub>6</sub>P<sub>6</sub></div></div><p></p><p class="pb-4 text-justify">The values in this formula are defined as environment-specific weights <code>w<sub>i</sub></code>, and parameter values, <code>P<sub>1</sub></code> through <code>P<sub>4</sub></code> are further indexed to the specific topic and capped per <code>TC</code>. The parameters are defined as follows:</p><ol class="list-decimal pl-6 text-justify"><li><b>Time in Mesh for Topic</b> – The time spent as a member of the mesh for the given topic.</li><li><b>First Message Deliveries for Topic</b> – The count of times the peer was the first to deliver messages for the topic.</li><li><b>Mesh Message Delivery Rate/Failures for Topic</b> – The delivery metric intended to penalize peers engaging in behaviors likely to be explicitly dropping messages.</li><li><b>Invalid Messages for Topic</b> – The metric intended to penalize peers delivering application-invalid messages.</li><li><b>Application-Specific Score</b> – A deferring score that is application-specific and left to implementation.</li><li><b>IP Collocation Factor</b> – The metric penalizing the number of peers connecting from the same IP address, that surpasses an application-controlled threshold.</li></ol><p class="pb-4 text-justify">To preserve anonymity and unlinkability of application-level functions, the other functions are only associated with a graph address and carry an implicit scoring system:</p><div class="p-6 my-6 block rounded-xl dark:bg-white/10 bg-pink-50 drop-shadow-xl font-[&#x27;ui-serif&#x27;]"><div>Implicit Node Scoring:</div><ol class="list-decimal pl-6"><li><code>V = Σ<sup>n</sup><sub>i=1</sub>r<sub>i</sub>v<sub>i</sub></code>, where <code>V</code> is the aggregate sum of duration of data blocks made available <code>v<sub>i</sub></code>, and the rate at which they were requested <code>r<sub>i</sub></code>. The purpose is to reward long-term retention of data.</li><li><code>A = avg(<!-- -->{<!-- -->r<sub>1</sub>a<sub>1</sub>, r<sub>2</sub>a<sub>2</sub>, ..., r<sub>n</sub>a<sub>n</sub>}<!-- -->)</code>, where <code>A</code> is the averaged ratio of attested data requests processed:unprocessed, and the inverse rate at which they were requested. The purpose is to reward rare data deliverability.</li><li><code>Score = V + A</code></li></ol></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/QuilibriumNetwork/docs/tree/main/docs/learn/communication/p2p-communication.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/learn/communication/mixnet-routing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Mixnet Routing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/learn/block-storage/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Foundations: Block Storage</div></a></nav></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/build/running-applications">Build</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/run-node/quick-start">Run</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn/communication/">Learn</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discourse.quilibrium.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://warpcast.com/~/channel/quilibrium" target="_blank" rel="noopener noreferrer" class="footer__link-item">Farcaster<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://quilibrium.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Quilibrium Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://paragraph.xyz/@quilibrium.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/QuilibriumNetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
Copyright © 2024 Quilibrium, Inc. <span>Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-SA 4.0.</a></span><br>
Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>