"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[650],{5099:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var n=s(4848),t=s(8453);s(6540);const r=()=>(0,n.jsx)("div",{className:"learn-page text-left flex md:flex-row flex-col text-slate",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("p",{className:"pb-4 text-justify",children:["Amending the ",(0,n.jsx)("a",{href:"https://arxiv.org/abs/2007.02754",children:"GossipSub"})," protocol, we replace the topic subscription/broadcast process to not be an exact matching basis, but rather a counting bloom filter based approach, hence the name Blossom, a portmanteau of Bloom-Sum. The scoring system is also amended to take advantage of the message reconstruction protocol ensuring node mesh behaviors are correct, connectivity between nodes is altered to incorporate a circuit construction, and finally time/rate related metrics are instead replaced by generic consumption of unforgeable proofs of valid behavior. These alterations drastically improve privacy (IP collection is useless), remove cheap Sybil attack potential (by virtue of making it very expensive to overwhelm the network), and no longer require message inspection/processing at multiple points, reducing redundant compute costs."]}),(0,n.jsx)("h2",{className:"text-xl pt-10 pb-4 font-medium",children:"Peer Discovery"}),(0,n.jsx)("p",{className:"pb-4 text-justify",children:"Peer discovery is achieved through an open peer exchange, where nodes will offer a score-indexed list of peers in terms of ip address and public route keys, or graph address and capabilities."}),(0,n.jsxs)("div",{className:"p-6 my-6 block rounded-xl dark:bg-white/10 bg-pink-50 drop-shadow-xl justify-center flex flex-col",children:[(0,n.jsx)("img",{className:"pt-10",src:"/img/docs/learn/communication/BlossomSub.png",alt:"A diagram depicting the high level network structure"}),(0,n.jsx)("div",{className:"text-sm text-center",children:"A depiction of a SLRP cluster under BlossomSub \u2013 each black circle corresponds to a node, a box with arrows indicates a participant, and 3, 2, and 1 nested circles indicate remaining envelope depth"})]}),(0,n.jsx)("p",{className:"pb-4 text-justify",children:"Node operation capabilities are typically self-adjusting, but in the event a node operator explicitly configures their node to enable/disable certain capabilities (at the impact of their score), only the capabilities the node broadcasts support for will be given."}),(0,n.jsx)("h2",{className:"text-xl pt-10 pb-4 font-medium",children:"Peer Connections"}),(0,n.jsxs)("p",{className:"pb-4 text-justify",children:["Peer connections are established using the same terminology as ",(0,n.jsx)("a",{href:"https://arxiv.org/abs/2007.02754",children:"GossipSub"}),", with the topics switched with a bitmask:"]}),(0,n.jsxs)("div",{className:"p-6 my-6 block rounded-xl dark:bg-white/10 bg-pink-50 drop-shadow-xl font-['ui-serif']",children:[(0,n.jsx)("div",{children:"Gossip Channel Join/Graft:"}),(0,n.jsxs)("ol",{className:"list-decimal pl-6",children:[(0,n.jsxs)("li",{children:["A node scans the list for nodes with ",(0,n.jsx)("code",{children:"ROUTE"})," capability."]}),(0,n.jsx)("li",{children:"At random, six nodes are picked, and an enveloped 3-depth gossip channel with each is created."}),(0,n.jsxs)("li",{children:["The node gossips a bandwidth-adjusted ",(0,n.jsx)("code",{children:"JOIN[bitmask]"})," message (bitmasks are calculated relative to bandwidth, this adjusts periodically) with a fresh random join public key."]}),(0,n.jsxs)("li",{children:["Nodes processing within that bitmask will gossip a ",(0,n.jsx)("code",{children:"GRAFT[bitmask]"})," message with a fresh random graft public key, exchanged with the gossiped ",(0,n.jsx)("code",{children:"JOIN"})," key. This ",(0,n.jsx)("code",{children:"GRAFT"})," should only occur on one of the gossip channels."]}),(0,n.jsxs)("li",{children:["Nodes accepting the ",(0,n.jsx)("code",{children:"GRAFT"})," initiate an ad-hoc join of Triple-Ratchet for the cluster, and begin participation in SLRP."]})]})]}),(0,n.jsx)("p",{className:"pb-4 text-justify",children:"For routing functionality, we can adopt the basic GossipSub scoring mechanism:"}),(0,n.jsxs)("p",{className:"text-center flex flex-row justify-center text-xl pb-4",children:[(0,n.jsx)("div",{className:"flex flex-col justify-center",children:"Score(peer) = TC("}),(0,n.jsx)("div",{className:"inline-block",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"text-sm",children:"4"}),(0,n.jsx)("div",{className:"text-4xl",children:"\u03a3"}),(0,n.jsx)("div",{className:"text-sm",children:"n=1"})]})}),(0,n.jsx)("div",{className:"flex flex-col justify-center pl-2",children:(0,n.jsxs)("div",{children:["w",(0,n.jsx)("sub",{children:"n,t"}),"P",(0,n.jsx)("sub",{children:"n,t"}),") + w",(0,n.jsx)("sub",{children:"5"}),"P",(0,n.jsx)("sub",{children:"5"})," + w",(0,n.jsx)("sub",{children:"6"}),"P",(0,n.jsx)("sub",{children:"6"})]})})]}),(0,n.jsxs)("p",{className:"pb-4 text-justify",children:["The values in this formula are defined as environment-specific weights ",(0,n.jsxs)("code",{children:["w",(0,n.jsx)("sub",{children:"i"})]}),", and parameter values, ",(0,n.jsxs)("code",{children:["P",(0,n.jsx)("sub",{children:"1"})]})," through ",(0,n.jsxs)("code",{children:["P",(0,n.jsx)("sub",{children:"4"})]})," are further indexed to the specific topic and capped per ",(0,n.jsx)("code",{children:"TC"}),". The parameters are defined as follows:"]}),(0,n.jsxs)("ol",{className:"list-decimal pl-6 text-justify",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"Time in Mesh for Topic"})," \u2013 The time spent as a member of the mesh for the given topic."]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"First Message Deliveries for Topic"})," \u2013 The count of times the peer was the first to deliver messages for the topic."]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"Mesh Message Delivery Rate/Failures for Topic"})," \u2013 The delivery metric intended to penalize peers engaging in behaviors likely to be explicitly dropping messages."]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"Invalid Messages for Topic"})," \u2013 The metric intended to penalize peers delivering application-invalid messages."]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"Application-Specific Score"})," \u2013 A deferring score that is application-specific and left to implementation."]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"IP Collocation Factor"})," \u2013 The metric penalizing the number of peers connecting from the same IP address, that surpasses an application-controlled threshold."]})]}),(0,n.jsx)("p",{className:"pb-4 text-justify",children:"To preserve anonymity and unlinkability of application-level functions, the other functions are only associated with a graph address and carry an implicit scoring system:"}),(0,n.jsxs)("div",{className:"p-6 my-6 block rounded-xl dark:bg-white/10 bg-pink-50 drop-shadow-xl font-['ui-serif']",children:[(0,n.jsx)("div",{children:"Implicit Node Scoring:"}),(0,n.jsxs)("ol",{className:"list-decimal pl-6",children:[(0,n.jsxs)("li",{children:[(0,n.jsxs)("code",{children:["V = \u03a3",(0,n.jsx)("sup",{children:"n"}),(0,n.jsx)("sub",{children:"i=1"}),"r",(0,n.jsx)("sub",{children:"i"}),"v",(0,n.jsx)("sub",{children:"i"})]}),", where ",(0,n.jsx)("code",{children:"V"})," is the aggregate sum of duration of data blocks made available ",(0,n.jsxs)("code",{children:["v",(0,n.jsx)("sub",{children:"i"})]}),", and the rate at which they were requested ",(0,n.jsxs)("code",{children:["r",(0,n.jsx)("sub",{children:"i"})]}),". The purpose is to reward long-term retention of data."]}),(0,n.jsxs)("li",{children:[(0,n.jsxs)("code",{children:["A = avg(","{","r",(0,n.jsx)("sub",{children:"1"}),"a",(0,n.jsx)("sub",{children:"1"}),", r",(0,n.jsx)("sub",{children:"2"}),"a",(0,n.jsx)("sub",{children:"2"}),", ..., r",(0,n.jsx)("sub",{children:"n"}),"a",(0,n.jsx)("sub",{children:"n"}),"}",")"]}),", where ",(0,n.jsx)("code",{children:"A"})," is the averaged ratio of attested data requests processed:unprocessed, and the inverse rate at which they were requested. The purpose is to reward rare data deliverability."]}),(0,n.jsx)("li",{children:(0,n.jsx)("code",{children:"Score = V + A"})})]})]})]})}),a={sidebar_position:4},c="P2P Communication",o={id:"learn/communication/p2p-communication",title:"P2P Communication",description:"",source:"@site/docs/learn/communication/p2p-communication.md",sourceDirName:"learn/communication",slug:"/learn/communication/p2p-communication",permalink:"/docs/learn/communication/p2p-communication",draft:!1,unlisted:!1,editUrl:"https://github.com/QuilibriumNetwork/docs/tree/main/docs/learn/communication/p2p-communication.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"learn",previous:{title:"Mixnet Routing",permalink:"/docs/learn/communication/mixnet-routing"},next:{title:"Foundations: Block Storage",permalink:"/docs/learn/block-storage/"}},l={},d=[];function h(e){const i={h1:"h1",header:"header",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"p2p-communication",children:"P2P Communication"})}),"\n",(0,n.jsx)(r,{})]})}function p(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},8453:(e,i,s)=>{s.d(i,{R:()=>a,x:()=>c});var n=s(6540);const t={},r=n.createContext(t);function a(e){const i=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(r.Provider,{value:i},e.children)}}}]);